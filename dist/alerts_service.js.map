{"version":3,"sources":["../src/alerts_service.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;sBAAc,QAAQ;;;;;AAIT,oBAAC,IAAW,EAAE;QAAX,OAAO,GAAT,IAAW,CAAT,OAAO;;;;AACnB,QAAI,CAAC,OAAO,EAAE;AACZ,YAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,CAAC;KAC3D;AACD,QAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,QAAI,CAAC,SAAS,GAAG,IAAI,OAAO,CAAC,UAAU,EAAE,CAAC;AAC1C,QAAI,CAAC,OAAO,GAAG,CAAC,CAAC;GAClB;;;;WAEG,gBAAG;AACL,UAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;AACxB,aAAO,oBAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC7B;;;WACG,cAAC,KAA+H,EAAE;UAA/H,KAAK,GAAP,KAA+H,CAA7H,KAAK;UAAE,OAAO,GAAhB,KAA+H,CAAtH,OAAO;+BAAhB,KAA+H,CAA7G,YAAY;UAAZ,YAAY,sCAAG,IAAI;UAAE,SAAS,GAAhD,KAA+H,CAAxF,SAAS;UAAE,WAAW,GAA7D,KAA+H,CAA7E,WAAW;UAAE,aAAa,GAA5E,KAA+H,CAAhE,aAAa;uBAA5E,KAA+H,CAAjD,IAAI;UAAJ,IAAI,8BAAG,SAAS;8BAA9F,KAA+H,CAA/B,WAAW;UAAX,WAAW,qCAAG,KAAK;;UAAK,KAAK,4BAA7H,KAA+H;;AAClI,UAAI,CAAC,MAAM,CAAC,IAAI;AACd,aAAK,EAAL,KAAK;AACL,eAAO,EAAP,OAAO;AACP,iBAAS,EAAT,SAAS;AACT,mBAAW,EAAX,WAAW;AACX,qBAAa,EAAb,aAAa;AACb,oBAAY,EAAZ,YAAY;AACZ,YAAI,EAAJ,IAAI;AACJ,mBAAW,EAAX,WAAW;SACR,KAAK;AACR,WAAG,EAAE,IAAI,CAAC,OAAO,IAAI,CAAC;SACtB,CAAC;AACH,UAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KAC1B;;;WAEI,eAAC,KAAK,EAAE;AACX,UAAI,CAAC,IAAI,cACJ,KAAK;AACR,YAAI,EAAE,OAAO;SACb,CAAC;KACJ;;;WAEM,iBAAC,KAAK,EAAE;AACb,0BAAE,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,UAAA,OAAO;eAAI,OAAO,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG;OAAA,CAAC,CAAC;AAC5D,UAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KAC1B","file":"alerts_service.js","sourcesContent":["import _ from 'lodash';\n\n\nexport default class {\n  constructor({ Tracker }) {\n    if (!Tracker) {\n      throw new Error('please provide Tracker in your context');\n    }\n    this.confirmCallbacks = {};\n    this.alerts = [];\n    this.alertsDep = new Tracker.Dependency();\n    this.counter = 0;\n  }\n\n  list() {\n    this.alertsDep.depend();\n    return _.clone(this.alerts); // we provide a copy\n  }\n  show({ title, message, dismissAfter = 8000, onDismiss, actionLabel, onActionClick, type = 'default', disableI18n = false, ...props }) {\n    this.alerts.push({\n      title,\n      message,\n      onDismiss,\n      actionLabel,\n      onActionClick,\n      dismissAfter,\n      type,\n      disableI18n,\n      ...props,\n      key: this.counter += 1,\n    });\n    this.alertsDep.changed();\n  }\n\n  error(props) {\n    this.show({\n      ...props,\n      type: 'error',\n    });\n  }\n\n  dismiss(alert) {\n    _.remove(this.alerts, anAlert => anAlert.key === alert.key);\n    this.alertsDep.changed();\n  }\n\n}\n"]}